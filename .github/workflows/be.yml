name: Deploy Backend (InfinityFree)

on:
  push:
    branches: ["main"]
    paths:
      - 'backend/**' # Chá»‰ cháº¡y khi folder backend thay Ä‘á»•i

jobs:
  deploy-be:
    runs-on: ubuntu-latest
    name: Deploy PHP to InfinityFree
    steps:
      - name: ðŸšš Láº¥y code má»›i nháº¥t
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - name: ðŸš€ Upload lÃªn InfinityFree qua FTP
        uses: SamKirkland/FTP-Deploy-Action@v4.3.5
        with:
          server: ${{ secrets.IF_FTP_SERVER }}
          username: ${{ secrets.IF_FTP_USERNAME }}
          password: ${{ secrets.IF_FTP_PASSWORD }}
          local-dir: ./backend/
          # InfinityFree báº¯t buá»™c code pháº£i náº±m trong thÆ° má»¥c htdocs
          server-dir: /htdocs/  
          # LÆ°u Ã½: InfinityFree hay cháº·n IP cá»§a GitHub Actions. 
          # Náº¿u upload tháº¥t báº¡i, báº¡n cÃ³ thá»ƒ cáº§n thá»­ láº¡i hoáº·c dÃ¹ng hosting khÃ¡c.
